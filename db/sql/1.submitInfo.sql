CREATE TABLE countries (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL UNIQUE,
    isd_code VARCHAR(50) NOT NULL
);


INSERT INTO countries (name, isd_code) VALUES ('Afghanistan', '+93');
INSERT INTO countries (name, isd_code) VALUES ('Albania', '+355');
INSERT INTO countries (name, isd_code) VALUES ('Algeria', '+213');
INSERT INTO countries (name, isd_code) VALUES ('Andorra', '+376');
INSERT INTO countries (name, isd_code) VALUES ('Angola', '+244');
INSERT INTO countries (name, isd_code) VALUES ('Antigua and Barbuda', '+1-268');
INSERT INTO countries (name, isd_code) VALUES ('Argentina', '+54');
INSERT INTO countries (name, isd_code) VALUES ('Armenia', '+374');
INSERT INTO countries (name, isd_code) VALUES ('Australia', '+61');
INSERT INTO countries (name, isd_code) VALUES ('Austria', '+43');
INSERT INTO countries (name, isd_code) VALUES ('Azerbaijan', '+994');
INSERT INTO countries (name, isd_code) VALUES ('Bahamas', '+1-242');
INSERT INTO countries (name, isd_code) VALUES ('Bahrain', '+973');
INSERT INTO countries (name, isd_code) VALUES ('Bangladesh', '+880');
INSERT INTO countries (name, isd_code) VALUES ('Barbados', '+1-246');
INSERT INTO countries (name, isd_code) VALUES ('Belarus', '+375');
INSERT INTO countries (name, isd_code) VALUES ('Belgium', '+32');
INSERT INTO countries (name, isd_code) VALUES ('Belize', '+501');
INSERT INTO countries (name, isd_code) VALUES ('Benin', '+229');
INSERT INTO countries (name, isd_code) VALUES ('Bhutan', '+975');
INSERT INTO countries (name, isd_code) VALUES ('Bolivia', '+591');
INSERT INTO countries (name, isd_code) VALUES ('Bosnia and Herzegovina', '+387');
INSERT INTO countries (name, isd_code) VALUES ('Botswana', '+267');
INSERT INTO countries (name, isd_code) VALUES ('Brazil', '+55');
INSERT INTO countries (name, isd_code) VALUES ('Brunei', '+673');
INSERT INTO countries (name, isd_code) VALUES ('Bulgaria', '+359');
INSERT INTO countries (name, isd_code) VALUES ('Burkina Faso', '+226');
INSERT INTO countries (name, isd_code) VALUES ('Burundi', '+257');
INSERT INTO countries (name, isd_code) VALUES ('Cabo Verde', '+238');
INSERT INTO countries (name, isd_code) VALUES ('Cambodia', '+855');
INSERT INTO countries (name, isd_code) VALUES ('Cameroon', '+237');
INSERT INTO countries (name, isd_code) VALUES ('Canada', '+1');
INSERT INTO countries (name, isd_code) VALUES ('Central African Republic', '+236');
INSERT INTO countries (name, isd_code) VALUES ('Chad', '+235');
INSERT INTO countries (name, isd_code) VALUES ('Chile', '+56');
INSERT INTO countries (name, isd_code) VALUES ('China', '+86');
INSERT INTO countries (name, isd_code) VALUES ('Colombia', '+57');
INSERT INTO countries (name, isd_code) VALUES ('Comoros', '+269');
INSERT INTO countries (name, isd_code) VALUES ('Congo (Republic of the)', '+242');
INSERT INTO countries (name, isd_code) VALUES ('Congo (Democratic Republic)', '+243');
INSERT INTO countries (name, isd_code) VALUES ('Costa Rica', '+506');
INSERT INTO countries (name, isd_code) VALUES ('Cote d\Ivoire', '+225');
INSERT INTO countries (name, isd_code) VALUES ('Croatia', '+385');
INSERT INTO countries (name, isd_code) VALUES ('Cuba', '+53');
INSERT INTO countries (name, isd_code) VALUES ('Cyprus', '+357');
INSERT INTO countries (name, isd_code) VALUES ('Czech Republic', '+420');
INSERT INTO countries (name, isd_code) VALUES ('Denmark', '+45');
INSERT INTO countries (name, isd_code) VALUES ('Djibouti', '+253');
INSERT INTO countries (name, isd_code) VALUES ('Dominica', '+1-767');
INSERT INTO countries (name, isd_code) VALUES ('Dominican Republic', '+1-809, +1-829, +1-849');
INSERT INTO countries (name, isd_code) VALUES ('Ecuador', '+593');
INSERT INTO countries (name, isd_code) VALUES ('Egypt', '+20');
INSERT INTO countries (name, isd_code) VALUES ('El Salvador', '+503');
INSERT INTO countries (name, isd_code) VALUES ('Equatorial Guinea', '+240');
INSERT INTO countries (name, isd_code) VALUES ('Eritrea', '+291');
INSERT INTO countries (name, isd_code) VALUES ('Estonia', '+372');
INSERT INTO countries (name, isd_code) VALUES ('Eswatini (Swaziland)', '+268');
INSERT INTO countries (name, isd_code) VALUES ('Ethiopia', '+251');
INSERT INTO countries (name, isd_code) VALUES ('Fiji', '+679');
INSERT INTO countries (name, isd_code) VALUES ('Finland', '+358');
INSERT INTO countries (name, isd_code) VALUES ('France', '+33');
INSERT INTO countries (name, isd_code) VALUES ('Gabon', '+241');
INSERT INTO countries (name, isd_code) VALUES ('Gambia', '+220');
INSERT INTO countries (name, isd_code) VALUES ('Georgia', '+995');
INSERT INTO countries (name, isd_code) VALUES ('Germany', '+49');
INSERT INTO countries (name, isd_code) VALUES ('Ghana', '+233');
INSERT INTO countries (name, isd_code) VALUES ('Greece', '+30');
INSERT INTO countries (name, isd_code) VALUES ('Grenada', '+1-473');
INSERT INTO countries (name, isd_code) VALUES ('Guatemala', '+502');
INSERT INTO countries (name, isd_code) VALUES ('Guinea', '+224');
INSERT INTO countries (name, isd_code) VALUES ('Guinea-Bissau', '+245');
INSERT INTO countries (name, isd_code) VALUES ('Guyana', '+592');
INSERT INTO countries (name, isd_code) VALUES ('Haiti', '+509');
INSERT INTO countries (name, isd_code) VALUES ('Honduras', '+504');
INSERT INTO countries (name, isd_code) VALUES ('Hungary', '+36');
INSERT INTO countries (name, isd_code) VALUES ('Iceland', '+354');
INSERT INTO countries (name, isd_code) VALUES ('India', '+91');
INSERT INTO countries (name, isd_code) VALUES ('Indonesia', '+62');
INSERT INTO countries (name, isd_code) VALUES ('Iran', '+98');
INSERT INTO countries (name, isd_code) VALUES ('Iraq', '+964');
INSERT INTO countries (name, isd_code) VALUES ('Ireland', '+353');
INSERT INTO countries (name, isd_code) VALUES ('Israel', '+972');
INSERT INTO countries (name, isd_code) VALUES ('Italy', '+39');
INSERT INTO countries (name, isd_code) VALUES ('Jamaica', '+1-876');
INSERT INTO countries (name, isd_code) VALUES ('Japan', '+81');
INSERT INTO countries (name, isd_code) VALUES ('Jordan', '+962');
INSERT INTO countries (name, isd_code) VALUES ('Kazakhstan', '+7');
INSERT INTO countries (name, isd_code) VALUES ('Kenya', '+254');
INSERT INTO countries (name, isd_code) VALUES ('Kiribati', '+686');
INSERT INTO countries (name, isd_code) VALUES ('Korea, North', '+850');
INSERT INTO countries (name, isd_code) VALUES ('Korea, South', '+82');
INSERT INTO countries (name, isd_code) VALUES ('Kosovo', '+383');
INSERT INTO countries (name, isd_code) VALUES ('Kuwait', '+965');
INSERT INTO countries (name, isd_code) VALUES ('Kyrgyzstan', '+996');
INSERT INTO countries (name, isd_code) VALUES ('Laos', '+856');
INSERT INTO countries (name, isd_code) VALUES ('Latvia', '+371');
INSERT INTO countries (name, isd_code) VALUES ('Lebanon', '+961');
INSERT INTO countries (name, isd_code) VALUES ('Lesotho', '+266');
INSERT INTO countries (name, isd_code) VALUES ('Liberia', '+231');
INSERT INTO countries (name, isd_code) VALUES ('Libya', '+218');
INSERT INTO countries (name, isd_code) VALUES ('Liechtenstein', '+423');
INSERT INTO countries (name, isd_code) VALUES ('Lithuania', '+370');
INSERT INTO countries (name, isd_code) VALUES ('Luxembourg', '+352');
INSERT INTO countries (name, isd_code) VALUES ('Madagascar', '+261');
INSERT INTO countries (name, isd_code) VALUES ('Malawi', '+265');
INSERT INTO countries (name, isd_code) VALUES ('Malaysia', '+60');
INSERT INTO countries (name, isd_code) VALUES ('Maldives', '+960');
INSERT INTO countries (name, isd_code) VALUES ('Mali', '+223');
INSERT INTO countries (name, isd_code) VALUES ('Malta', '+356');
INSERT INTO countries (name, isd_code) VALUES ('Marshall Islands', '+692');
INSERT INTO countries (name, isd_code) VALUES ('Mauritania', '+222');
INSERT INTO countries (name, isd_code) VALUES ('Mauritius', '+230');
INSERT INTO countries (name, isd_code) VALUES ('Mexico', '+52');
INSERT INTO countries (name, isd_code) VALUES ('Micronesia', '+691');
INSERT INTO countries (name, isd_code) VALUES ('Moldova', '+373');
INSERT INTO countries (name, isd_code) VALUES ('Monaco', '+377');
INSERT INTO countries (name, isd_code) VALUES ('Mongolia', '+976');
INSERT INTO countries (name, isd_code) VALUES ('Montenegro', '+382');
INSERT INTO countries (name, isd_code) VALUES ('Morocco', '+212');
INSERT INTO countries (name, isd_code) VALUES ('Mozambique', '+258');
INSERT INTO countries (name, isd_code) VALUES ('Myanmar (Burma)', '+95');
INSERT INTO countries (name, isd_code) VALUES ('Namibia', '+264');
INSERT INTO countries (name, isd_code) VALUES ('Nauru', '+674');
INSERT INTO countries (name, isd_code) VALUES ('Nepal', '+977');
INSERT INTO countries (name, isd_code) VALUES ('Netherlands', '+31');
INSERT INTO countries (name, isd_code) VALUES ('New Zealand', '+64');
INSERT INTO countries (name, isd_code) VALUES ('Nicaragua', '+505');
INSERT INTO countries (name, isd_code) VALUES ('Niger', '+227');
INSERT INTO countries (name, isd_code) VALUES ('Nigeria', '+234');
INSERT INTO countries (name, isd_code) VALUES ('North Macedonia', '+389');
INSERT INTO countries (name, isd_code) VALUES ('Norway', '+47');
INSERT INTO countries (name, isd_code) VALUES ('Oman', '+968');
INSERT INTO countries (name, isd_code) VALUES ('Pakistan', '+92');
INSERT INTO countries (name, isd_code) VALUES ('Palau', '+680');
INSERT INTO countries (name, isd_code) VALUES ('Palestine', '+970');
INSERT INTO countries (name, isd_code) VALUES ('Panama', '+507');
INSERT INTO countries (name, isd_code) VALUES ('Papua New Guinea', '+675');
INSERT INTO countries (name, isd_code) VALUES ('Paraguay', '+595');
INSERT INTO countries (name, isd_code) VALUES ('Peru', '+51');
INSERT INTO countries (name, isd_code) VALUES ('Philippines', '+63');
INSERT INTO countries (name, isd_code) VALUES ('Poland', '+48');
INSERT INTO countries (name, isd_code) VALUES ('Portugal', '+351');
INSERT INTO countries (name, isd_code) VALUES ('Qatar', '+974');
INSERT INTO countries (name, isd_code) VALUES ('Romania', '+40');
INSERT INTO countries (name, isd_code) VALUES ('Russia', '+7');
INSERT INTO countries (name, isd_code) VALUES ('Rwanda', '+250');
INSERT INTO countries (name, isd_code) VALUES ('Saint Kitts and Nevis', '+1-869');
INSERT INTO countries (name, isd_code) VALUES ('Saint Lucia', '+1-758');
INSERT INTO countries (name, isd_code) VALUES ('Saint Vincent and the Grenadines', '+1-784');
INSERT INTO countries (name, isd_code) VALUES ('Samoa', '+685');
INSERT INTO countries (name, isd_code) VALUES ('San Marino', '+378');
INSERT INTO countries (name, isd_code) VALUES ('Sao Tome and Principe', '+239');
INSERT INTO countries (name, isd_code) VALUES ('Saudi Arabia', '+966');
INSERT INTO countries (name, isd_code) VALUES ('Senegal', '+221');
INSERT INTO countries (name, isd_code) VALUES ('Serbia', '+381');
INSERT INTO countries (name, isd_code) VALUES ('Seychelles', '+248');
INSERT INTO countries (name, isd_code) VALUES ('Sierra Leone', '+232');
INSERT INTO countries (name, isd_code) VALUES ('Singapore', '+65');
INSERT INTO countries (name, isd_code) VALUES ('Slovakia', '+421');
INSERT INTO countries (name, isd_code) VALUES ('Slovenia', '+386');
INSERT INTO countries (name, isd_code) VALUES ('Solomon Islands', '+677');
INSERT INTO countries (name, isd_code) VALUES ('Somalia', '+252');
INSERT INTO countries (name, isd_code) VALUES ('South Africa', '+27');
INSERT INTO countries (name, isd_code) VALUES ('South Sudan', '+211');
INSERT INTO countries (name, isd_code) VALUES ('Spain', '+34');
INSERT INTO countries (name, isd_code) VALUES ('Sri Lanka', '+94');
INSERT INTO countries (name, isd_code) VALUES ('Sudan', '+249');
INSERT INTO countries (name, isd_code) VALUES ('Suriname', '+597');
INSERT INTO countries (name, isd_code) VALUES ('Sweden', '+46');
INSERT INTO countries (name, isd_code) VALUES ('Switzerland', '+41');
INSERT INTO countries (name, isd_code) VALUES ('Syria', '+963');
INSERT INTO countries (name, isd_code) VALUES ('Taiwan', '+886');
INSERT INTO countries (name, isd_code) VALUES ('Tajikistan', '+992');
INSERT INTO countries (name, isd_code) VALUES ('Tanzania', '+255');
INSERT INTO countries (name, isd_code) VALUES ('Thailand', '+66');
INSERT INTO countries (name, isd_code) VALUES ('Timor-Leste', '+670');
INSERT INTO countries (name, isd_code) VALUES ('Togo', '+228');
INSERT INTO countries (name, isd_code) VALUES ('Tonga', '+676');
INSERT INTO countries (name, isd_code) VALUES ('Trinidad and Tobago', '+1-868');
INSERT INTO countries (name, isd_code) VALUES ('Tunisia', '+216');
INSERT INTO countries (name, isd_code) VALUES ('Turkey', '+90');
INSERT INTO countries (name, isd_code) VALUES ('Turkmenistan', '+993');
INSERT INTO countries (name, isd_code) VALUES ('Tuvalu', '+688');
INSERT INTO countries (name, isd_code) VALUES ('Uganda', '+256');
INSERT INTO countries (name, isd_code) VALUES ('Ukraine', '+380');
INSERT INTO countries (name, isd_code) VALUES ('United Arab Emirates', '+971');
INSERT INTO countries (name, isd_code) VALUES ('United Kingdom', '+44');
INSERT INTO countries (name, isd_code) VALUES ('United States', '+1');
INSERT INTO countries (name, isd_code) VALUES ('Uruguay', '+598');
INSERT INTO countries (name, isd_code) VALUES ('Uzbekistan', '+998');
INSERT INTO countries (name, isd_code) VALUES ('Vanuatu', '+678');
INSERT INTO countries (name, isd_code) VALUES ('Vatican City', '+379');
INSERT INTO countries (name, isd_code) VALUES ('Venezuela', '+58');
INSERT INTO countries (name, isd_code) VALUES ('Vietnam', '+84');
INSERT INTO countries (name, isd_code) VALUES ('Yemen', '+967');
INSERT INTO countries (name, isd_code) VALUES ('Zambia', '+260');
INSERT INTO countries (name, isd_code) VALUES ('Zimbabwe', '+263');


-- Create Users Table
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP,
    created_by VARCHAR(100) NOT NULL DEFAULT 'System',
    updated_by VARCHAR(100),
    is_active BOOLEAN NOT NULL DEFAULT true,
    is_deleted BOOLEAN NOT NULL DEFAULT false,    
    username VARCHAR(100) NOT NULL UNIQUE,
    email VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    mobile_number VARCHAR(20),
    tenant_ids INTEGER[],
    failed_login_attempts INTEGER DEFAULT 0,
    last_logged_in_at TIMESTAMP,
    user_type VARCHAR(50),
    is_locked BOOLEAN DEFAULT false,
    is_temporary_password BOOLEAN DEFAULT false
);

-- Example user data
INSERT INTO users (
    username, email, password, first_name, last_name, mobile_number,
    tenant_ids, failed_login_attempts, last_logged_in_at, user_type, is_locked, is_temporary_password
) VALUES (
    'Akash', 'akash@codiot', 'Admin@123', 'Akash', 'Akash', '8866104284',
    ARRAY[]::integer[], 0, NULL, 'Chief Admin', false, false -- Explicit cast to integer[] for tenant_ids
);


-- Create permissions Table
CREATE TABLE permissions (
    id SERIAL PRIMARY KEY,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP,
    created_by VARCHAR(100) NOT NULL DEFAULT 'System',
    updated_by VARCHAR(100),
    is_active BOOLEAN NOT NULL DEFAULT true,
    is_deleted BOOLEAN NOT NULL DEFAULT false,
    name VARCHAR(255) NOT NULL UNIQUE,
    type VARCHAR(50) NOT NULL CHECK (type IN ('READ', 'WRITE', 'DELETE')), -- Example values, adjust as per your enum
    parent_id INTEGER,
    description VARCHAR(255)
);

-- Example Data Insertion
INSERT INTO permissions (
    name, type, parent_id, description
) VALUES (
    'Read Permission', 'READ', NULL, 'Allows read access'
);



-- Create Role Table
CREATE TABLE role (
    id SERIAL PRIMARY KEY,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP,
    created_by VARCHAR(100) NOT NULL DEFAULT 'System',
    updated_by VARCHAR(100),
    is_active BOOLEAN NOT NULL DEFAULT true,
    is_deleted BOOLEAN NOT NULL DEFAULT false,
    name VARCHAR(100) NOT NULL,
    description VARCHAR(255) NOT NULL,
    type VARCHAR(50) NOT NULL CHECK (type IN ('admin', 'user')),
);

-- Example Data Insertion
INSERT INTO role (
    name, description, type
) VALUES (
    'Admin Role', 'Admin role description', 'admin'
);
